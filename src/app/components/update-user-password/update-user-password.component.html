<div>
  <form (ngSubmit)="handleUpdateUserPassword()" [formGroup]="updateUserPasswordForm">

    <h2>Update User Password</h2>
    <hr>

    @if(responseErrorMessage != "")
    {
      <div class="alert alert-danger text-center">{{responseErrorMessage }}</div>
    }

    <label class="mt-3" for="currentPassword">Current Password <span class="text-danger">*</span></label>
    <input formControlName="currentPassword" class="form-control" type="password" id="currentPassword" >
    @let currentPasswordControl = updateUserPasswordForm.get('currentPassword');
    @if(currentPasswordControl?.touched)
    {
      <div>
        @if(currentPasswordControl?.getError('required'))
        {
          <p class="text-small mt-0 text-danger">Current Password is Required</p>
        }
        @else if(currentPasswordControl?.getError('pattern'))
        {
          <p class="text-small mt-0 text-danger">Please Enter a vaild Password (starts with a capital letter followed by small letter followed by at least 3 chars)</p>
        }
      </div>
    }


    <label class="mt-3" for="password">new Password <span class="text-danger">*</span></label>
    <input formControlName="password" class="form-control" type="password" id="password" >
    @let passwordControl = updateUserPasswordForm.get('password');
    @if(passwordControl?.touched)
    {
      <div>
        @if(passwordControl?.getError('required'))
        {
          <p class="text-small mt-0 text-danger">Password is Required</p>
        }
        @else if(passwordControl?.getError('pattern'))
        {
          <p class="text-small mt-0 text-danger">Please Enter a vaild Password (starts with a capital letter followed by small letter followed by at least 3 chars)</p>
        }
      </div>
    }

    <label class="mt-3" for="rePassword">Confirm New Password <span class="text-danger">*</span></label>
    <input formControlName="rePassword" class="form-control" type="password" id="rePassword" >
    @let rePasswordControl = updateUserPasswordForm.get('rePassword');
    @if(rePasswordControl?.dirty && currentPasswordControl?.dirty)
    {
      <div>
        @if(updateUserPasswordForm.getError("passwordMisMatch"))
        {
          <p class="text-small mt-0 text-danger">Pssword doesn't match Repassword</p>
        }
      </div>
    }



    <button [disabled]="updateUserPasswordForm.invalid || isLoading" class="btn bg-main text-light mt-4 w-100 rounded-pill">
      @if(!isLoading)
      {
        <span>Update Password</span>
      }
      @if(isLoading)
      {
        <span class="fa-solid fa-spinner fa-spin"></span>
      }
    </button>
  </form>
</div>
